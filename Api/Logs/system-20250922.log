2025-09-22 11:06:32.143 -05:00 [INF] Executed DbCommand (103ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE `Api_Mediconnet_Onion`;
2025-09-22 11:06:34.266 -05:00 [INF] Executed DbCommand (102ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER DATABASE CHARACTER SET utf8mb4;
2025-09-22 11:06:34.411 -05:00 [INF] Executed DbCommand (140ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TArea` (
    `NAreaID` int(12) NOT NULL AUTO_INCREMENT,
    `CNombre` varchar(30) CHARACTER SET utf8mb4 NOT NULL,
    `CDescripcion` varchar(1000) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`NAreaID`)
) CHARACTER SET=utf8mb4;
2025-09-22 11:06:34.532 -05:00 [INF] Executed DbCommand (117ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TDiaSemana` (
    `NDiaSemanaID` int(12) NOT NULL AUTO_INCREMENT,
    `CNombre` varchar(30) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`NDiaSemanaID`)
) CHARACTER SET=utf8mb4;
2025-09-22 11:06:34.643 -05:00 [INF] Executed DbCommand (108ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TEspecialidad` (
    `NEspecialidadID` int(12) NOT NULL AUTO_INCREMENT,
    `CNombre` varchar(30) CHARACTER SET utf8mb4 NOT NULL,
    `CDescripcion` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`NEspecialidadID`)
) CHARACTER SET=utf8mb4;
2025-09-22 11:06:34.753 -05:00 [INF] Executed DbCommand (107ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TEstadoCita` (
    `NEstadoCitaID` int(6) NOT NULL AUTO_INCREMENT,
    `CNombre` varchar(30) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`NEstadoCitaID`)
) CHARACTER SET=utf8mb4;
2025-09-22 11:06:34.857 -05:00 [INF] Executed DbCommand (101ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TEstadoUsuario` (
    `NEstadoUsuarioID` int(12) NOT NULL AUTO_INCREMENT,
    `CNombre` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`NEstadoUsuarioID`)
) CHARACTER SET=utf8mb4;
2025-09-22 11:06:34.964 -05:00 [INF] Executed DbCommand (103ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TEstadoVerificacion` (
    `NEstadoVerificacion` int(12) NOT NULL AUTO_INCREMENT,
    `CNombre` varchar(30) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`NEstadoVerificacion`)
) CHARACTER SET=utf8mb4;
2025-09-22 11:06:35.075 -05:00 [INF] Executed DbCommand (108ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TGrupoSanguineo` (
    `NGrupoSanguineoID` int(12) NOT NULL AUTO_INCREMENT,
    `CNombre` varchar(10) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`NGrupoSanguineoID`)
) CHARACTER SET=utf8mb4;
2025-09-22 11:06:35.185 -05:00 [INF] Executed DbCommand (107ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TRol` (
    `NRolID` int(32) NOT NULL AUTO_INCREMENT,
    `CNombre` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`NRolID`)
) CHARACTER SET=utf8mb4;
2025-09-22 11:06:35.293 -05:00 [INF] Executed DbCommand (105ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TTipoIdentificacion` (
    `NTipoIdentificacion` int(12) NOT NULL AUTO_INCREMENT,
    `CNombre` varchar(30) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`NTipoIdentificacion`)
) CHARACTER SET=utf8mb4;
2025-09-22 11:06:35.431 -05:00 [INF] Executed DbCommand (134ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TUsuario` (
    `nUsuarioID` int(32) NOT NULL AUTO_INCREMENT,
    `NEstadoVerificacionFK` int(12) NOT NULL,
    `NEstadoUsuarioFK` int(12) NOT NULL,
    `NRolFK` int(12) NOT NULL,
    `CNombre` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `CApellido` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `CEmail` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `CPassword` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `DFechaRegistro` DateTime NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`nUsuarioID`),
    CONSTRAINT `FK_Usuario_EstadoUsuario` FOREIGN KEY (`NEstadoUsuarioFK`) REFERENCES `TEstadoUsuario` (`NEstadoUsuarioID`) ON DELETE RESTRICT,
    CONSTRAINT `FK_Usuario_EstadoVerificacion` FOREIGN KEY (`NEstadoVerificacionFK`) REFERENCES `TEstadoVerificacion` (`NEstadoVerificacion`) ON DELETE RESTRICT,
    CONSTRAINT `FK_Usuario_Rol` FOREIGN KEY (`NRolFK`) REFERENCES `TRol` (`NRolID`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-09-22 11:06:35.555 -05:00 [INF] Executed DbCommand (120ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TCodigoVerificacion` (
    `NCodigoVerificacionID` int(32) NOT NULL AUTO_INCREMENT,
    `NUsuarioFK` int(6) NOT NULL,
    `CCodigo` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `ETipoCodigo` varchar(25) CHARACTER SET utf8mb4 NOT NULL,
    `DFechaExpiracion` datetime NOT NULL,
    `BUsado` tinyint(1) NOT NULL DEFAULT FALSE,
    `NIntentos` int(11) NOT NULL,
    `DFechaCreacion` datetime NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`NCodigoVerificacionID`),
    CONSTRAINT `FK_CodigoVerificacion_Usuario` FOREIGN KEY (`NUsuarioFK`) REFERENCES `TUsuario` (`nUsuarioID`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-09-22 11:06:35.664 -05:00 [INF] Executed DbCommand (105ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TLogins` (
    `NLoginID` int(32) NOT NULL AUTO_INCREMENT,
    `DFechaLogin` DateTime NOT NULL,
    `NUsuarioFK` int(32) NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`NLoginID`),
    CONSTRAINT `FK_Usuario_Logins` FOREIGN KEY (`NUsuarioFK`) REFERENCES `TUsuario` (`nUsuarioID`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-09-22 11:06:35.781 -05:00 [INF] Executed DbCommand (114ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TPersona` (
    `NPersonaID` int(32) NOT NULL AUTO_INCREMENT,
    `NUsuarioFK` int(32) NOT NULL,
    `NTipoIdentificacionFK` int(32) NOT NULL,
    `CNroIdentificacion` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `CNroConctacto` varchar(30) CHARACTER SET utf8mb4 NOT NULL,
    `CDireccion` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `DFechaNacimiento` DateTime NOT NULL,
    `ESexo` varchar(25) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`NPersonaID`),
    CONSTRAINT `FK_Personas_TipoIdentificacion` FOREIGN KEY (`NTipoIdentificacionFK`) REFERENCES `TTipoIdentificacion` (`NTipoIdentificacion`) ON DELETE RESTRICT,
    CONSTRAINT `FK_TPersona_TUsuario_NUsuarioFK` FOREIGN KEY (`NUsuarioFK`) REFERENCES `TUsuario` (`nUsuarioID`)
) CHARACTER SET=utf8mb4;
2025-09-22 11:06:35.899 -05:00 [INF] Executed DbCommand (114ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TPaciente` (
    `NPacienteID` int(32) NOT NULL AUTO_INCREMENT,
    `NPersonaFK` int(32) NOT NULL,
    `NGrupoSanguineoFK` int(6) NOT NULL,
    `CAlergiasGenerales` varchar(2000) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`NPacienteID`),
    CONSTRAINT `FK_Paciente_GrupoSanguineo` FOREIGN KEY (`NGrupoSanguineoFK`) REFERENCES `TGrupoSanguineo` (`NGrupoSanguineoID`) ON DELETE RESTRICT,
    CONSTRAINT `FK_TPaciente_TPersona_NPersonaFK` FOREIGN KEY (`NPersonaFK`) REFERENCES `TPersona` (`NPersonaID`)
) CHARACTER SET=utf8mb4;
2025-09-22 11:06:36.021 -05:00 [INF] Executed DbCommand (116ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TProfesional` (
    `NProfesionalID` int(32) NOT NULL AUTO_INCREMENT,
    `NPersonaFK` int(32) NOT NULL,
    `NEspecialidadFK` int(12) NOT NULL,
    `NAreaFK` int(12) NOT NULL,
    `CRegistroProfesional` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `DFechaContratacion` DateTime NOT NULL,
    `ETipoProfesional` varchar(25) CHARACTER SET utf8mb4 NOT NULL,
    `CBiografia` varchar(2000) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`NProfesionalID`),
    CONSTRAINT `FK_Profesional_Area` FOREIGN KEY (`NAreaFK`) REFERENCES `TArea` (`NAreaID`) ON DELETE RESTRICT,
    CONSTRAINT `FK_Profesional_Especialidad` FOREIGN KEY (`NEspecialidadFK`) REFERENCES `TEspecialidad` (`NEspecialidadID`) ON DELETE RESTRICT,
    CONSTRAINT `FK_TProfesional_TPersona_NPersonaFK` FOREIGN KEY (`NPersonaFK`) REFERENCES `TPersona` (`NPersonaID`)
) CHARACTER SET=utf8mb4;
2025-09-22 11:06:36.143 -05:00 [INF] Executed DbCommand (117ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TCita` (
    `NCitaID` int(12) NOT NULL AUTO_INCREMENT,
    `NEstadoCitaFK` int(12) NOT NULL,
    `NProfesionalFK` int(12) NOT NULL,
    `NPacienteFK` int(12) NOT NULL,
    `NDiaSemanaFK` int(12) NOT NULL,
    `DFecha` datetime NOT NULL,
    `DHora` time NOT NULL,
    `DDuracion` time NOT NULL,
    `CObservacion` varchar(500) CHARACTER SET utf8mb4 NOT NULL,
    `DFechaRegistro` datetime NOT NULL,
    `ProfesionalNProfesionalID` int(32) NOT NULL,
    `PacienteNPacienteID` int(32) NOT NULL,
    `EstadoNEstadoCitaID` int(6) NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`NCitaID`),
    CONSTRAINT `FK_Cita_DiaSemana` FOREIGN KEY (`NDiaSemanaFK`) REFERENCES `TDiaSemana` (`NDiaSemanaID`) ON DELETE RESTRICT,
    CONSTRAINT `FK_TCita_TEstadoCita_EstadoNEstadoCitaID` FOREIGN KEY (`EstadoNEstadoCitaID`) REFERENCES `TEstadoCita` (`NEstadoCitaID`) ON DELETE CASCADE,
    CONSTRAINT `FK_TCita_TPaciente_PacienteNPacienteID` FOREIGN KEY (`PacienteNPacienteID`) REFERENCES `TPaciente` (`NPacienteID`) ON DELETE CASCADE,
    CONSTRAINT `FK_TCita_TProfesional_ProfesionalNProfesionalID` FOREIGN KEY (`ProfesionalNProfesionalID`) REFERENCES `TProfesional` (`NProfesionalID`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-09-22 11:06:36.263 -05:00 [INF] Executed DbCommand (116ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `TDiaSemana` (`NDiaSemanaID`, `CNombre`)
VALUES (1, 'Lunes'),
(2, 'Martes'),
(3, 'Miércoles'),
(4, 'Jueves'),
(5, 'Viernes'),
(6, 'Sábado'),
(7, 'Domingo');
2025-09-22 11:06:36.366 -05:00 [INF] Executed DbCommand (101ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `TEstadoUsuario` (`NEstadoUsuarioID`, `CNombre`)
VALUES (1, 'Activo'),
(2, 'Inactivo');
2025-09-22 11:06:36.476 -05:00 [INF] Executed DbCommand (106ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `TEstadoVerificacion` (`NEstadoVerificacion`, `CNombre`)
VALUES (1, 'No Verificado'),
(2, 'Verificado');
2025-09-22 11:06:36.580 -05:00 [INF] Executed DbCommand (101ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `TGrupoSanguineo` (`NGrupoSanguineoID`, `CNombre`)
VALUES (1, 'A+'),
(2, 'A-'),
(3, 'B+'),
(4, 'B-'),
(5, 'AB+'),
(6, 'AB-'),
(7, 'O+'),
(8, 'O-');
2025-09-22 11:06:36.684 -05:00 [INF] Executed DbCommand (100ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `TRol` (`NRolID`, `CNombre`)
VALUES (1, 'Administrador'),
(2, 'Paciente'),
(3, 'Medico');
2025-09-22 11:06:36.791 -05:00 [INF] Executed DbCommand (104ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `TTipoIdentificacion` (`NTipoIdentificacion`, `CNombre`)
VALUES (1, 'Cédula de ciudadanía'),
(2, 'Tarjeta de identidad'),
(3, 'Registro civil de nacimiento'),
(4, 'Cédula de extranjería'),
(5, 'Pasaporte');
2025-09-22 11:06:36.924 -05:00 [INF] Executed DbCommand (130ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `CNombre` ON `TArea` (`CNombre`);
2025-09-22 11:06:37.039 -05:00 [INF] Executed DbCommand (111ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_TCita_EstadoNEstadoCitaID` ON `TCita` (`EstadoNEstadoCitaID`);
2025-09-22 11:06:37.152 -05:00 [INF] Executed DbCommand (110ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_TCita_NDiaSemanaFK` ON `TCita` (`NDiaSemanaFK`);
2025-09-22 11:06:37.262 -05:00 [INF] Executed DbCommand (107ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_TCita_PacienteNPacienteID` ON `TCita` (`PacienteNPacienteID`);
2025-09-22 11:06:37.379 -05:00 [INF] Executed DbCommand (112ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_TCita_ProfesionalNProfesionalID` ON `TCita` (`ProfesionalNProfesionalID`);
2025-09-22 11:06:37.494 -05:00 [INF] Executed DbCommand (112ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `CCodigo` ON `TCodigoVerificacion` (`CCodigo`);
2025-09-22 11:06:37.607 -05:00 [INF] Executed DbCommand (109ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_TCodigoVerificacion_NUsuarioFK` ON `TCodigoVerificacion` (`NUsuarioFK`);
2025-09-22 11:06:37.726 -05:00 [INF] Executed DbCommand (116ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `CNombre1` ON `TDiaSemana` (`CNombre`);
2025-09-22 11:06:37.837 -05:00 [INF] Executed DbCommand (108ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `CNombre2` ON `TEspecialidad` (`CNombre`);
2025-09-22 11:06:37.946 -05:00 [INF] Executed DbCommand (105ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `CNombre3` ON `TEstadoCita` (`CNombre`);
2025-09-22 11:06:38.059 -05:00 [INF] Executed DbCommand (110ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `CNombre4` ON `TEstadoUsuario` (`CNombre`);
2025-09-22 11:06:38.176 -05:00 [INF] Executed DbCommand (114ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `CNombre5` ON `TEstadoVerificacion` (`CNombre`);
2025-09-22 11:06:38.296 -05:00 [INF] Executed DbCommand (118ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `CNombre6` ON `TGrupoSanguineo` (`CNombre`);
2025-09-22 11:06:38.408 -05:00 [INF] Executed DbCommand (108ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_TLogins_NUsuarioFK` ON `TLogins` (`NUsuarioFK`);
2025-09-22 11:06:38.530 -05:00 [INF] Executed DbCommand (119ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_TPaciente_NGrupoSanguineoFK` ON `TPaciente` (`NGrupoSanguineoFK`);
2025-09-22 11:06:38.646 -05:00 [INF] Executed DbCommand (113ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_TPaciente_NPersonaFK` ON `TPaciente` (`NPersonaFK`);
2025-09-22 11:06:38.766 -05:00 [INF] Executed DbCommand (116ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `CNroIdentificacion` ON `TPersona` (`CNroIdentificacion`);
2025-09-22 11:06:38.899 -05:00 [INF] Executed DbCommand (131ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_TPersona_NTipoIdentificacionFK` ON `TPersona` (`NTipoIdentificacionFK`);
2025-09-22 11:06:39.020 -05:00 [INF] Executed DbCommand (118ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_TPersona_NUsuarioFK` ON `TPersona` (`NUsuarioFK`);
2025-09-22 11:06:39.137 -05:00 [INF] Executed DbCommand (114ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `CRegistroProfesional` ON `TProfesional` (`CRegistroProfesional`);
2025-09-22 11:06:39.254 -05:00 [INF] Executed DbCommand (114ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_TProfesional_NAreaFK` ON `TProfesional` (`NAreaFK`);
2025-09-22 11:06:39.392 -05:00 [INF] Executed DbCommand (135ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_TProfesional_NEspecialidadFK` ON `TProfesional` (`NEspecialidadFK`);
2025-09-22 11:06:39.521 -05:00 [INF] Executed DbCommand (126ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_TProfesional_NPersonaFK` ON `TProfesional` (`NPersonaFK`);
2025-09-22 11:06:39.639 -05:00 [INF] Executed DbCommand (117ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `CNombre7` ON `TRol` (`CNombre`);
2025-09-22 11:06:39.755 -05:00 [INF] Executed DbCommand (114ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `CNombre8` ON `TTipoIdentificacion` (`CNombre`);
2025-09-22 11:06:39.879 -05:00 [INF] Executed DbCommand (120ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `CEmail` ON `TUsuario` (`CEmail`);
2025-09-22 11:06:40.010 -05:00 [INF] Executed DbCommand (127ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_TUsuario_NEstadoUsuarioFK` ON `TUsuario` (`NEstadoUsuarioFK`);
2025-09-22 11:06:40.132 -05:00 [INF] Executed DbCommand (119ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_TUsuario_NEstadoVerificacionFK` ON `TUsuario` (`NEstadoVerificacionFK`);
2025-09-22 11:06:40.254 -05:00 [INF] Executed DbCommand (117ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_TUsuario_NRolFK` ON `TUsuario` (`NRolFK`);
2025-09-22 11:06:40.487 -05:00 [INF] User profile is available. Using 'C:\Users\ronal\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 11:06:40.597 -05:00 [INF] Now listening on: http://[::]:5000
2025-09-22 11:06:40.602 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 11:06:40.603 -05:00 [INF] Hosting environment: Production
2025-09-22 11:06:40.604 -05:00 [INF] Content root path: C:\Users\ronal\Desktop\Archivos\Api_Mediconnet_Onion\api
2025-09-22 11:07:31.259 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Api/Usuario - null null
2025-09-22 11:07:31.284 -05:00 [WRN] Failed to determine the https port for redirect.
2025-09-22 11:07:31.289 -05:00 [INF] CORS policy execution successful.
2025-09-22 11:07:31.299 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Api/Usuario - 204 null null 41.828ms
2025-09-22 11:07:31.307 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Api/Usuario - application/json 115
2025-09-22 11:07:31.312 -05:00 [INF] CORS policy execution successful.
2025-09-22 11:07:31.340 -05:00 [INF] Executing endpoint 'Api_Mediconnet.Api.Controllers.UsuarioController.PostUsuario (Api_Mediconnet.Api)'
2025-09-22 11:07:31.364 -05:00 [INF] Route matched with {action = "PostUsuario", controller = "Usuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostUsuario(Api_Mediconnet.Application.DTOs.TUsuarioCreateDTO) on controller Api_Mediconnet.Api.Controllers.UsuarioController (Api_Mediconnet.Api).
2025-09-22 11:07:32.351 -05:00 [INF] Executed DbCommand (274ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (Size = 50), @p3='?' (Size = 255), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `TUsuario` (`CApellido`, `CEmail`, `CNombre`, `CPassword`, `DFechaRegistro`, `NEstadoUsuarioFK`, `NEstadoVerificacionFK`, `NRolFK`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `nUsuarioID`
FROM `TUsuario`
WHERE ROW_COUNT() = 1 AND `nUsuarioID` = LAST_INSERT_ID();
2025-09-22 11:07:32.479 -05:00 [INF] Usuario con ID 1 creado exitosamente.
2025-09-22 11:07:32.869 -05:00 [INF] Executed DbCommand (100ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`CNombre`
FROM `TUsuario` AS `t`
INNER JOIN `TRol` AS `t0` ON `t`.`NRolFK` = `t0`.`NRolID`
WHERE `t`.`nUsuarioID` = @__id_0
LIMIT 1
2025-09-22 11:07:32.911 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-22 11:07:32.938 -05:00 [INF] Executed action Api_Mediconnet.Api.Controllers.UsuarioController.PostUsuario (Api_Mediconnet.Api) in 1568.1854ms
2025-09-22 11:07:32.941 -05:00 [INF] Executed endpoint 'Api_Mediconnet.Api.Controllers.UsuarioController.PostUsuario (Api_Mediconnet.Api)'
2025-09-22 11:07:32.947 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Api/Usuario - 200 null application/json; charset=utf-8 1640.405ms
2025-09-22 11:07:32.951 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Api/EmailCode/Verificar - null null
2025-09-22 11:07:32.955 -05:00 [INF] CORS policy execution successful.
2025-09-22 11:07:32.957 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Api/EmailCode/Verificar - 204 null null 6.4222ms
2025-09-22 11:07:32.962 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Api/EmailCode/Verificar - application/json 2
2025-09-22 11:07:32.966 -05:00 [INF] CORS policy execution successful.
2025-09-22 11:07:33.019 -05:00 [INF] Executing endpoint 'Api_Mediconnet.Api.Controllers.EmailCodeController.PostVerificarEmailCode (Api_Mediconnet.Api)'
2025-09-22 11:07:33.027 -05:00 [INF] Route matched with {action = "PostVerificarEmailCode", controller = "EmailCode"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] PostVerificarEmailCode(Api_Mediconnet.Application.DTOs.VerificarCodigoRequestDTO) on controller Api_Mediconnet.Api.Controllers.EmailCodeController (Api_Mediconnet.Api).
2025-09-22 11:07:33.671 -05:00 [INF] Executed DbCommand (121ms) [Parameters=[@__usuarioId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`NCodigoVerificacionID`, `t`.`BUsado`, `t`.`CCodigo`, `t`.`DFechaCreacion`, `t`.`DFechaExpiracion`, `t`.`ETipoCodigo`, `t`.`NIntentos`, `t`.`NUsuarioFK`
FROM `TCodigoVerificacion` AS `t`
WHERE ((`t`.`NUsuarioFK` = @__usuarioId_0) AND (`t`.`ETipoCodigo` = 'Email')) AND NOT (`t`.`BUsado`)
ORDER BY `t`.`DFechaCreacion` DESC
LIMIT 1
2025-09-22 11:07:33.675 -05:00 [ERR] No se encontró un código de verificación con el ID 1 para validar.
2025-09-22 11:07:33.678 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-22 11:07:33.682 -05:00 [INF] Executed action Api_Mediconnet.Api.Controllers.EmailCodeController.PostVerificarEmailCode (Api_Mediconnet.Api) in 652.7401ms
2025-09-22 11:07:33.684 -05:00 [INF] Executed endpoint 'Api_Mediconnet.Api.Controllers.EmailCodeController.PostVerificarEmailCode (Api_Mediconnet.Api)'
2025-09-22 11:07:33.685 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Api/EmailCode/Verificar - 404 null application/json; charset=utf-8 723.2586ms
2025-09-22 11:09:25.345 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Api/Usuario - null null
2025-09-22 11:09:25.347 -05:00 [INF] CORS policy execution successful.
2025-09-22 11:09:25.348 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Api/Usuario - 204 null null 3.2361ms
2025-09-22 11:09:25.350 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Api/Usuario - application/json 114
2025-09-22 11:09:25.353 -05:00 [INF] CORS policy execution successful.
2025-09-22 11:09:25.356 -05:00 [INF] Executing endpoint 'Api_Mediconnet.Api.Controllers.UsuarioController.PostUsuario (Api_Mediconnet.Api)'
2025-09-22 11:09:25.358 -05:00 [INF] Route matched with {action = "PostUsuario", controller = "Usuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostUsuario(Api_Mediconnet.Application.DTOs.TUsuarioCreateDTO) on controller Api_Mediconnet.Api.Controllers.UsuarioController (Api_Mediconnet.Api).
2025-09-22 11:09:26.114 -05:00 [INF] Executed DbCommand (223ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (Size = 50), @p3='?' (Size = 255), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `TUsuario` (`CApellido`, `CEmail`, `CNombre`, `CPassword`, `DFechaRegistro`, `NEstadoUsuarioFK`, `NEstadoVerificacionFK`, `NRolFK`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `nUsuarioID`
FROM `TUsuario`
WHERE ROW_COUNT() = 1 AND `nUsuarioID` = LAST_INSERT_ID();
2025-09-22 11:09:26.219 -05:00 [INF] Usuario con ID 2 creado exitosamente.
2025-09-22 11:09:26.420 -05:00 [INF] Executed DbCommand (101ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`CNombre`
FROM `TUsuario` AS `t`
INNER JOIN `TRol` AS `t0` ON `t`.`NRolFK` = `t0`.`NRolID`
WHERE `t`.`nUsuarioID` = @__id_0
LIMIT 1
2025-09-22 11:09:26.427 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-22 11:09:26.431 -05:00 [INF] Executed action Api_Mediconnet.Api.Controllers.UsuarioController.PostUsuario (Api_Mediconnet.Api) in 1071.2535ms
2025-09-22 11:09:26.433 -05:00 [INF] Executed endpoint 'Api_Mediconnet.Api.Controllers.UsuarioController.PostUsuario (Api_Mediconnet.Api)'
2025-09-22 11:09:26.435 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Api/Usuario - 200 null application/json; charset=utf-8 1084.1487ms
2025-09-22 11:09:26.440 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Api/EmailCode/Verificar - null null
2025-09-22 11:09:26.443 -05:00 [INF] CORS policy execution successful.
2025-09-22 11:09:26.445 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Api/EmailCode/Verificar - 204 null null 4.6398ms
2025-09-22 11:09:26.449 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Api/EmailCode/Verificar - application/json 2
2025-09-22 11:09:26.451 -05:00 [INF] CORS policy execution successful.
2025-09-22 11:09:26.455 -05:00 [INF] Executing endpoint 'Api_Mediconnet.Api.Controllers.EmailCodeController.PostVerificarEmailCode (Api_Mediconnet.Api)'
2025-09-22 11:09:26.457 -05:00 [INF] Route matched with {action = "PostVerificarEmailCode", controller = "EmailCode"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] PostVerificarEmailCode(Api_Mediconnet.Application.DTOs.VerificarCodigoRequestDTO) on controller Api_Mediconnet.Api.Controllers.EmailCodeController (Api_Mediconnet.Api).
2025-09-22 11:09:26.875 -05:00 [INF] Executed DbCommand (99ms) [Parameters=[@__usuarioId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`NCodigoVerificacionID`, `t`.`BUsado`, `t`.`CCodigo`, `t`.`DFechaCreacion`, `t`.`DFechaExpiracion`, `t`.`ETipoCodigo`, `t`.`NIntentos`, `t`.`NUsuarioFK`
FROM `TCodigoVerificacion` AS `t`
WHERE ((`t`.`NUsuarioFK` = @__usuarioId_0) AND (`t`.`ETipoCodigo` = 'Email')) AND NOT (`t`.`BUsado`)
ORDER BY `t`.`DFechaCreacion` DESC
LIMIT 1
2025-09-22 11:09:26.880 -05:00 [ERR] No se encontró un código de verificación con el ID 2 para validar.
2025-09-22 11:09:26.883 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-22 11:09:26.886 -05:00 [INF] Executed action Api_Mediconnet.Api.Controllers.EmailCodeController.PostVerificarEmailCode (Api_Mediconnet.Api) in 427.0133ms
2025-09-22 11:09:26.888 -05:00 [INF] Executed endpoint 'Api_Mediconnet.Api.Controllers.EmailCodeController.PostVerificarEmailCode (Api_Mediconnet.Api)'
2025-09-22 11:09:26.890 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Api/EmailCode/Verificar - 404 null application/json; charset=utf-8 441.0868ms
2025-09-22 11:12:45.819 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Api/EmailCode/Verificar - null null
2025-09-22 11:12:45.824 -05:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-09-22 11:12:45.825 -05:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-09-22 11:12:45.827 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Api/EmailCode/Verificar - 405 0 null 8.3161ms
2025-09-22 11:14:31.374 -05:00 [INF] Executed DbCommand (112ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE `Api_Mediconnet_Onion`;
2025-09-22 11:14:33.541 -05:00 [INF] Executed DbCommand (115ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER DATABASE CHARACTER SET utf8mb4;
2025-09-22 11:14:33.704 -05:00 [INF] Executed DbCommand (159ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TArea` (
    `NAreaID` int(12) NOT NULL AUTO_INCREMENT,
    `CNombre` varchar(30) CHARACTER SET utf8mb4 NOT NULL,
    `CDescripcion` varchar(1000) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`NAreaID`)
) CHARACTER SET=utf8mb4;
2025-09-22 11:14:33.817 -05:00 [INF] Executed DbCommand (108ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TDiaSemana` (
    `NDiaSemanaID` int(12) NOT NULL AUTO_INCREMENT,
    `CNombre` varchar(30) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`NDiaSemanaID`)
) CHARACTER SET=utf8mb4;
2025-09-22 11:14:33.928 -05:00 [INF] Executed DbCommand (105ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TEspecialidad` (
    `NEspecialidadID` int(12) NOT NULL AUTO_INCREMENT,
    `CNombre` varchar(30) CHARACTER SET utf8mb4 NOT NULL,
    `CDescripcion` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`NEspecialidadID`)
) CHARACTER SET=utf8mb4;
2025-09-22 11:14:34.040 -05:00 [INF] Executed DbCommand (108ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TEstadoCita` (
    `NEstadoCitaID` int(6) NOT NULL AUTO_INCREMENT,
    `CNombre` varchar(30) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`NEstadoCitaID`)
) CHARACTER SET=utf8mb4;
2025-09-22 11:14:34.154 -05:00 [INF] Executed DbCommand (110ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TEstadoUsuario` (
    `NEstadoUsuarioID` int(12) NOT NULL AUTO_INCREMENT,
    `CNombre` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`NEstadoUsuarioID`)
) CHARACTER SET=utf8mb4;
2025-09-22 11:14:34.270 -05:00 [INF] Executed DbCommand (110ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TEstadoVerificacion` (
    `NEstadoVerificacion` int(12) NOT NULL AUTO_INCREMENT,
    `CNombre` varchar(30) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`NEstadoVerificacion`)
) CHARACTER SET=utf8mb4;
2025-09-22 11:14:34.380 -05:00 [INF] Executed DbCommand (106ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TGrupoSanguineo` (
    `NGrupoSanguineoID` int(12) NOT NULL AUTO_INCREMENT,
    `CNombre` varchar(10) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`NGrupoSanguineoID`)
) CHARACTER SET=utf8mb4;
2025-09-22 11:14:34.492 -05:00 [INF] Executed DbCommand (108ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TRol` (
    `NRolID` int(32) NOT NULL AUTO_INCREMENT,
    `CNombre` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`NRolID`)
) CHARACTER SET=utf8mb4;
2025-09-22 11:14:34.605 -05:00 [INF] Executed DbCommand (108ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TTipoIdentificacion` (
    `NTipoIdentificacion` int(12) NOT NULL AUTO_INCREMENT,
    `CNombre` varchar(30) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`NTipoIdentificacion`)
) CHARACTER SET=utf8mb4;
2025-09-22 11:14:34.740 -05:00 [INF] Executed DbCommand (129ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TUsuario` (
    `nUsuarioID` int(32) NOT NULL AUTO_INCREMENT,
    `NEstadoVerificacionFK` int(12) NOT NULL,
    `NEstadoUsuarioFK` int(12) NOT NULL,
    `NRolFK` int(12) NOT NULL,
    `CNombre` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `CApellido` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `CEmail` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `CPassword` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `DFechaRegistro` DateTime NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`nUsuarioID`),
    CONSTRAINT `FK_Usuario_EstadoUsuario` FOREIGN KEY (`NEstadoUsuarioFK`) REFERENCES `TEstadoUsuario` (`NEstadoUsuarioID`) ON DELETE RESTRICT,
    CONSTRAINT `FK_Usuario_EstadoVerificacion` FOREIGN KEY (`NEstadoVerificacionFK`) REFERENCES `TEstadoVerificacion` (`NEstadoVerificacion`) ON DELETE RESTRICT,
    CONSTRAINT `FK_Usuario_Rol` FOREIGN KEY (`NRolFK`) REFERENCES `TRol` (`NRolID`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-09-22 11:14:34.855 -05:00 [INF] Executed DbCommand (112ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TCodigoVerificacion` (
    `NCodigoVerificacionID` int(32) NOT NULL AUTO_INCREMENT,
    `NUsuarioFK` int(6) NOT NULL,
    `CCodigo` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `ETipoCodigo` varchar(25) CHARACTER SET utf8mb4 NOT NULL,
    `DFechaExpiracion` datetime NOT NULL,
    `BUsado` tinyint(1) NOT NULL DEFAULT FALSE,
    `NIntentos` int(11) NOT NULL,
    `DFechaCreacion` datetime NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`NCodigoVerificacionID`),
    CONSTRAINT `FK_CodigoVerificacion_Usuario` FOREIGN KEY (`NUsuarioFK`) REFERENCES `TUsuario` (`nUsuarioID`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-09-22 11:14:34.967 -05:00 [INF] Executed DbCommand (108ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TLogins` (
    `NLoginID` int(32) NOT NULL AUTO_INCREMENT,
    `DFechaLogin` DateTime NOT NULL,
    `NUsuarioFK` int(32) NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`NLoginID`),
    CONSTRAINT `FK_Usuario_Logins` FOREIGN KEY (`NUsuarioFK`) REFERENCES `TUsuario` (`nUsuarioID`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-09-22 11:14:35.086 -05:00 [INF] Executed DbCommand (116ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TPersona` (
    `NPersonaID` int(32) NOT NULL AUTO_INCREMENT,
    `NUsuarioFK` int(32) NOT NULL,
    `NTipoIdentificacionFK` int(32) NOT NULL,
    `CNroIdentificacion` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `CNroConctacto` varchar(30) CHARACTER SET utf8mb4 NOT NULL,
    `CDireccion` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `DFechaNacimiento` DateTime NOT NULL,
    `ESexo` varchar(25) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`NPersonaID`),
    CONSTRAINT `FK_Personas_TipoIdentificacion` FOREIGN KEY (`NTipoIdentificacionFK`) REFERENCES `TTipoIdentificacion` (`NTipoIdentificacion`) ON DELETE RESTRICT,
    CONSTRAINT `FK_TPersona_TUsuario_NUsuarioFK` FOREIGN KEY (`NUsuarioFK`) REFERENCES `TUsuario` (`nUsuarioID`)
) CHARACTER SET=utf8mb4;
2025-09-22 11:14:35.215 -05:00 [INF] Executed DbCommand (124ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TPaciente` (
    `NPacienteID` int(32) NOT NULL AUTO_INCREMENT,
    `NPersonaFK` int(32) NOT NULL,
    `NGrupoSanguineoFK` int(6) NOT NULL,
    `CAlergiasGenerales` varchar(2000) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`NPacienteID`),
    CONSTRAINT `FK_Paciente_GrupoSanguineo` FOREIGN KEY (`NGrupoSanguineoFK`) REFERENCES `TGrupoSanguineo` (`NGrupoSanguineoID`) ON DELETE RESTRICT,
    CONSTRAINT `FK_TPaciente_TPersona_NPersonaFK` FOREIGN KEY (`NPersonaFK`) REFERENCES `TPersona` (`NPersonaID`)
) CHARACTER SET=utf8mb4;
2025-09-22 11:14:35.331 -05:00 [INF] Executed DbCommand (113ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TProfesional` (
    `NProfesionalID` int(32) NOT NULL AUTO_INCREMENT,
    `NPersonaFK` int(32) NOT NULL,
    `NEspecialidadFK` int(12) NOT NULL,
    `NAreaFK` int(12) NOT NULL,
    `CRegistroProfesional` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `DFechaContratacion` DateTime NOT NULL,
    `ETipoProfesional` varchar(25) CHARACTER SET utf8mb4 NOT NULL,
    `CBiografia` varchar(2000) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`NProfesionalID`),
    CONSTRAINT `FK_Profesional_Area` FOREIGN KEY (`NAreaFK`) REFERENCES `TArea` (`NAreaID`) ON DELETE RESTRICT,
    CONSTRAINT `FK_Profesional_Especialidad` FOREIGN KEY (`NEspecialidadFK`) REFERENCES `TEspecialidad` (`NEspecialidadID`) ON DELETE RESTRICT,
    CONSTRAINT `FK_TProfesional_TPersona_NPersonaFK` FOREIGN KEY (`NPersonaFK`) REFERENCES `TPersona` (`NPersonaID`)
) CHARACTER SET=utf8mb4;
2025-09-22 11:14:35.456 -05:00 [INF] Executed DbCommand (121ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `TCita` (
    `NCitaID` int(12) NOT NULL AUTO_INCREMENT,
    `NEstadoCitaFK` int(12) NOT NULL,
    `NProfesionalFK` int(12) NOT NULL,
    `NPacienteFK` int(12) NOT NULL,
    `NDiaSemanaFK` int(12) NOT NULL,
    `DFecha` datetime NOT NULL,
    `DHora` time NOT NULL,
    `DDuracion` time NOT NULL,
    `CObservacion` varchar(500) CHARACTER SET utf8mb4 NOT NULL,
    `DFechaRegistro` datetime NOT NULL,
    `ProfesionalNProfesionalID` int(32) NOT NULL,
    `PacienteNPacienteID` int(32) NOT NULL,
    `EstadoNEstadoCitaID` int(6) NOT NULL,
    CONSTRAINT `PRIMARY` PRIMARY KEY (`NCitaID`),
    CONSTRAINT `FK_Cita_DiaSemana` FOREIGN KEY (`NDiaSemanaFK`) REFERENCES `TDiaSemana` (`NDiaSemanaID`) ON DELETE RESTRICT,
    CONSTRAINT `FK_TCita_TEstadoCita_EstadoNEstadoCitaID` FOREIGN KEY (`EstadoNEstadoCitaID`) REFERENCES `TEstadoCita` (`NEstadoCitaID`) ON DELETE CASCADE,
    CONSTRAINT `FK_TCita_TPaciente_PacienteNPacienteID` FOREIGN KEY (`PacienteNPacienteID`) REFERENCES `TPaciente` (`NPacienteID`) ON DELETE CASCADE,
    CONSTRAINT `FK_TCita_TProfesional_ProfesionalNProfesionalID` FOREIGN KEY (`ProfesionalNProfesionalID`) REFERENCES `TProfesional` (`NProfesionalID`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-09-22 11:14:35.568 -05:00 [INF] Executed DbCommand (107ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `TDiaSemana` (`NDiaSemanaID`, `CNombre`)
VALUES (1, 'Lunes'),
(2, 'Martes'),
(3, 'Miércoles'),
(4, 'Jueves'),
(5, 'Viernes'),
(6, 'Sábado'),
(7, 'Domingo');
2025-09-22 11:14:35.671 -05:00 [INF] Executed DbCommand (101ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `TEstadoUsuario` (`NEstadoUsuarioID`, `CNombre`)
VALUES (1, 'Activo'),
(2, 'Inactivo');
2025-09-22 11:14:35.778 -05:00 [INF] Executed DbCommand (103ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `TEstadoVerificacion` (`NEstadoVerificacion`, `CNombre`)
VALUES (1, 'No Verificado'),
(2, 'Verificado');
2025-09-22 11:14:35.884 -05:00 [INF] Executed DbCommand (103ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `TGrupoSanguineo` (`NGrupoSanguineoID`, `CNombre`)
VALUES (1, 'A+'),
(2, 'A-'),
(3, 'B+'),
(4, 'B-'),
(5, 'AB+'),
(6, 'AB-'),
(7, 'O+'),
(8, 'O-');
2025-09-22 11:14:35.994 -05:00 [INF] Executed DbCommand (104ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `TRol` (`NRolID`, `CNombre`)
VALUES (1, 'Administrador'),
(2, 'Paciente'),
(3, 'Medico');
2025-09-22 11:14:36.103 -05:00 [INF] Executed DbCommand (105ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `TTipoIdentificacion` (`NTipoIdentificacion`, `CNombre`)
VALUES (1, 'Cédula de ciudadanía'),
(2, 'Tarjeta de identidad'),
(3, 'Registro civil de nacimiento'),
(4, 'Cédula de extranjería'),
(5, 'Pasaporte');
2025-09-22 11:14:36.228 -05:00 [INF] Executed DbCommand (121ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `CNombre` ON `TArea` (`CNombre`);
2025-09-22 11:14:36.348 -05:00 [INF] Executed DbCommand (117ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_TCita_EstadoNEstadoCitaID` ON `TCita` (`EstadoNEstadoCitaID`);
2025-09-22 11:14:36.459 -05:00 [INF] Executed DbCommand (107ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_TCita_NDiaSemanaFK` ON `TCita` (`NDiaSemanaFK`);
2025-09-22 11:14:36.577 -05:00 [INF] Executed DbCommand (114ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_TCita_PacienteNPacienteID` ON `TCita` (`PacienteNPacienteID`);
2025-09-22 11:14:36.699 -05:00 [INF] Executed DbCommand (117ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_TCita_ProfesionalNProfesionalID` ON `TCita` (`ProfesionalNProfesionalID`);
2025-09-22 11:14:36.811 -05:00 [INF] Executed DbCommand (108ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `CCodigo` ON `TCodigoVerificacion` (`CCodigo`);
2025-09-22 11:14:36.928 -05:00 [INF] Executed DbCommand (113ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_TCodigoVerificacion_NUsuarioFK` ON `TCodigoVerificacion` (`NUsuarioFK`);
2025-09-22 11:14:37.072 -05:00 [INF] Executed DbCommand (139ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `CNombre1` ON `TDiaSemana` (`CNombre`);
2025-09-22 11:14:37.184 -05:00 [INF] Executed DbCommand (110ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `CNombre2` ON `TEspecialidad` (`CNombre`);
2025-09-22 11:14:37.303 -05:00 [INF] Executed DbCommand (116ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `CNombre3` ON `TEstadoCita` (`CNombre`);
2025-09-22 11:14:37.420 -05:00 [INF] Executed DbCommand (114ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `CNombre4` ON `TEstadoUsuario` (`CNombre`);
2025-09-22 11:14:37.542 -05:00 [INF] Executed DbCommand (117ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `CNombre5` ON `TEstadoVerificacion` (`CNombre`);
2025-09-22 11:14:37.668 -05:00 [INF] Executed DbCommand (121ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `CNombre6` ON `TGrupoSanguineo` (`CNombre`);
2025-09-22 11:14:37.778 -05:00 [INF] Executed DbCommand (107ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_TLogins_NUsuarioFK` ON `TLogins` (`NUsuarioFK`);
2025-09-22 11:14:37.895 -05:00 [INF] Executed DbCommand (114ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_TPaciente_NGrupoSanguineoFK` ON `TPaciente` (`NGrupoSanguineoFK`);
2025-09-22 11:14:38.018 -05:00 [INF] Executed DbCommand (120ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_TPaciente_NPersonaFK` ON `TPaciente` (`NPersonaFK`);
2025-09-22 11:14:38.137 -05:00 [INF] Executed DbCommand (115ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `CNroIdentificacion` ON `TPersona` (`CNroIdentificacion`);
2025-09-22 11:14:38.255 -05:00 [INF] Executed DbCommand (115ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_TPersona_NTipoIdentificacionFK` ON `TPersona` (`NTipoIdentificacionFK`);
2025-09-22 11:14:38.375 -05:00 [INF] Executed DbCommand (115ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_TPersona_NUsuarioFK` ON `TPersona` (`NUsuarioFK`);
2025-09-22 11:14:38.487 -05:00 [INF] Executed DbCommand (111ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `CRegistroProfesional` ON `TProfesional` (`CRegistroProfesional`);
2025-09-22 11:14:38.600 -05:00 [INF] Executed DbCommand (112ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_TProfesional_NAreaFK` ON `TProfesional` (`NAreaFK`);
2025-09-22 11:14:38.717 -05:00 [INF] Executed DbCommand (115ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_TProfesional_NEspecialidadFK` ON `TProfesional` (`NEspecialidadFK`);
2025-09-22 11:14:38.834 -05:00 [INF] Executed DbCommand (113ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_TProfesional_NPersonaFK` ON `TProfesional` (`NPersonaFK`);
2025-09-22 11:14:38.954 -05:00 [INF] Executed DbCommand (116ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `CNombre7` ON `TRol` (`CNombre`);
2025-09-22 11:14:39.081 -05:00 [INF] Executed DbCommand (122ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `CNombre8` ON `TTipoIdentificacion` (`CNombre`);
2025-09-22 11:14:39.484 -05:00 [INF] Executed DbCommand (398ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `CEmail` ON `TUsuario` (`CEmail`);
2025-09-22 11:14:39.612 -05:00 [INF] Executed DbCommand (125ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_TUsuario_NEstadoUsuarioFK` ON `TUsuario` (`NEstadoUsuarioFK`);
2025-09-22 11:14:39.731 -05:00 [INF] Executed DbCommand (118ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_TUsuario_NEstadoVerificacionFK` ON `TUsuario` (`NEstadoVerificacionFK`);
2025-09-22 11:14:39.848 -05:00 [INF] Executed DbCommand (113ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_TUsuario_NRolFK` ON `TUsuario` (`NRolFK`);
2025-09-22 11:14:40.021 -05:00 [INF] User profile is available. Using 'C:\Users\ronal\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 11:14:40.076 -05:00 [INF] Now listening on: http://[::]:5000
2025-09-22 11:14:40.080 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 11:14:40.081 -05:00 [INF] Hosting environment: Production
2025-09-22 11:14:40.082 -05:00 [INF] Content root path: C:\Users\ronal\Desktop\Archivos\Api_Mediconnet_Onion\api
2025-09-22 11:15:12.153 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Api/Usuario - null null
2025-09-22 11:15:12.185 -05:00 [WRN] Failed to determine the https port for redirect.
2025-09-22 11:15:12.188 -05:00 [INF] CORS policy execution successful.
2025-09-22 11:15:12.193 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Api/Usuario - 204 null null 40.9886ms
2025-09-22 11:15:12.201 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Api/Usuario - application/json 120
2025-09-22 11:15:12.209 -05:00 [INF] CORS policy execution successful.
2025-09-22 11:15:12.230 -05:00 [INF] Executing endpoint 'Api_Mediconnet.Api.Controllers.UsuarioController.PostUsuario (Api_Mediconnet.Api)'
2025-09-22 11:15:12.248 -05:00 [INF] Route matched with {action = "PostUsuario", controller = "Usuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostUsuario(Api_Mediconnet.Application.DTOs.TUsuarioCreateDTO) on controller Api_Mediconnet.Api.Controllers.UsuarioController (Api_Mediconnet.Api).
2025-09-22 11:15:13.404 -05:00 [INF] Executed DbCommand (232ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (Size = 50), @p3='?' (Size = 255), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `TUsuario` (`CApellido`, `CEmail`, `CNombre`, `CPassword`, `DFechaRegistro`, `NEstadoUsuarioFK`, `NEstadoVerificacionFK`, `NRolFK`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `nUsuarioID`
FROM `TUsuario`
WHERE ROW_COUNT() = 1 AND `nUsuarioID` = LAST_INSERT_ID();
2025-09-22 11:15:13.567 -05:00 [INF] Usuario con ID 1 creado exitosamente.
2025-09-22 11:15:14.077 -05:00 [INF] Executed DbCommand (114ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`CNombre`
FROM `TUsuario` AS `t`
INNER JOIN `TRol` AS `t0` ON `t`.`NRolFK` = `t0`.`NRolID`
WHERE `t`.`nUsuarioID` = @__id_0
LIMIT 1
2025-09-22 11:15:14.110 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-22 11:15:14.134 -05:00 [INF] Executed action Api_Mediconnet.Api.Controllers.UsuarioController.PostUsuario (Api_Mediconnet.Api) in 1880.0338ms
2025-09-22 11:15:14.136 -05:00 [INF] Executed endpoint 'Api_Mediconnet.Api.Controllers.UsuarioController.PostUsuario (Api_Mediconnet.Api)'
2025-09-22 11:15:14.141 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Api/Usuario - 200 null application/json; charset=utf-8 1939.6606ms
2025-09-22 11:15:14.145 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Api/EmailCode/Verificar - null null
2025-09-22 11:15:14.148 -05:00 [INF] CORS policy execution successful.
2025-09-22 11:15:14.150 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Api/EmailCode/Verificar - 204 null null 4.9163ms
2025-09-22 11:15:14.153 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Api/EmailCode/Verificar - application/json 2
2025-09-22 11:15:14.156 -05:00 [INF] CORS policy execution successful.
2025-09-22 11:15:14.193 -05:00 [INF] Executing endpoint 'Api_Mediconnet.Api.Controllers.EmailCodeController.PostVerificarEmailCode (Api_Mediconnet.Api)'
2025-09-22 11:15:14.200 -05:00 [INF] Route matched with {action = "PostVerificarEmailCode", controller = "EmailCode"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] PostVerificarEmailCode(Api_Mediconnet.Application.DTOs.VerificarCodigoRequestDTO) on controller Api_Mediconnet.Api.Controllers.EmailCodeController (Api_Mediconnet.Api).
2025-09-22 11:15:14.571 -05:00 [INF] Executed DbCommand (103ms) [Parameters=[@__usuarioId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`NCodigoVerificacionID`, `t`.`BUsado`, `t`.`CCodigo`, `t`.`DFechaCreacion`, `t`.`DFechaExpiracion`, `t`.`ETipoCodigo`, `t`.`NIntentos`, `t`.`NUsuarioFK`
FROM `TCodigoVerificacion` AS `t`
WHERE ((`t`.`NUsuarioFK` = @__usuarioId_0) AND (`t`.`ETipoCodigo` = 'Email')) AND NOT (`t`.`BUsado`)
ORDER BY `t`.`DFechaCreacion` DESC
LIMIT 1
2025-09-22 11:15:14.577 -05:00 [ERR] No se encontró un código de verificación con el ID 1 para validar.
2025-09-22 11:15:14.579 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-22 11:15:14.584 -05:00 [INF] Executed action Api_Mediconnet.Api.Controllers.EmailCodeController.PostVerificarEmailCode (Api_Mediconnet.Api) in 380.4354ms
2025-09-22 11:15:14.588 -05:00 [INF] Executed endpoint 'Api_Mediconnet.Api.Controllers.EmailCodeController.PostVerificarEmailCode (Api_Mediconnet.Api)'
2025-09-22 11:15:14.591 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Api/EmailCode/Verificar - 404 null application/json; charset=utf-8 437.4179ms
2025-09-22 11:17:43.305 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Api/Usuario - null null
2025-09-22 11:17:43.307 -05:00 [INF] CORS policy execution successful.
2025-09-22 11:17:43.308 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Api/Usuario - 204 null null 3.9143ms
2025-09-22 11:17:43.311 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Api/Usuario - application/json 122
2025-09-22 11:17:43.313 -05:00 [INF] CORS policy execution successful.
2025-09-22 11:17:43.316 -05:00 [INF] Executing endpoint 'Api_Mediconnet.Api.Controllers.UsuarioController.PostUsuario (Api_Mediconnet.Api)'
2025-09-22 11:17:43.317 -05:00 [INF] Route matched with {action = "PostUsuario", controller = "Usuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostUsuario(Api_Mediconnet.Application.DTOs.TUsuarioCreateDTO) on controller Api_Mediconnet.Api.Controllers.UsuarioController (Api_Mediconnet.Api).
2025-09-22 11:17:44.323 -05:00 [INF] Executed DbCommand (211ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (Size = 50), @p3='?' (Size = 255), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `TUsuario` (`CApellido`, `CEmail`, `CNombre`, `CPassword`, `DFechaRegistro`, `NEstadoUsuarioFK`, `NEstadoVerificacionFK`, `NRolFK`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `nUsuarioID`
FROM `TUsuario`
WHERE ROW_COUNT() = 1 AND `nUsuarioID` = LAST_INSERT_ID();
2025-09-22 11:17:44.432 -05:00 [INF] Usuario con ID 2 creado exitosamente.
2025-09-22 11:17:44.761 -05:00 [INF] Executed DbCommand (99ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`CNombre`
FROM `TUsuario` AS `t`
INNER JOIN `TRol` AS `t0` ON `t`.`NRolFK` = `t0`.`NRolID`
WHERE `t`.`nUsuarioID` = @__id_0
LIMIT 1
2025-09-22 11:17:44.764 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-22 11:17:44.766 -05:00 [INF] Executed action Api_Mediconnet.Api.Controllers.UsuarioController.PostUsuario (Api_Mediconnet.Api) in 1446.2934ms
2025-09-22 11:17:44.769 -05:00 [INF] Executed endpoint 'Api_Mediconnet.Api.Controllers.UsuarioController.PostUsuario (Api_Mediconnet.Api)'
2025-09-22 11:17:44.772 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Api/Usuario - 200 null application/json; charset=utf-8 1460.8047ms
2025-09-22 11:17:44.777 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Api/EmailCode - null null
2025-09-22 11:17:44.780 -05:00 [INF] CORS policy execution successful.
2025-09-22 11:17:44.783 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Api/EmailCode - 204 null null 5.2329ms
2025-09-22 11:17:44.787 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Api/EmailCode - application/json 2
2025-09-22 11:17:44.790 -05:00 [INF] CORS policy execution successful.
2025-09-22 11:17:44.796 -05:00 [INF] Executing endpoint 'Api_Mediconnet.Api.Controllers.EmailCodeController.PostEmailCode (Api_Mediconnet.Api)'
2025-09-22 11:17:44.804 -05:00 [INF] Route matched with {action = "PostEmailCode", controller = "EmailCode"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] PostEmailCode() on controller Api_Mediconnet.Api.Controllers.EmailCodeController (Api_Mediconnet.Api).
2025-09-22 11:17:45.362 -05:00 [INF] Executed DbCommand (99ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`nUsuarioID`, `t`.`CApellido`, `t`.`CEmail`, `t`.`CNombre`, `t`.`CPassword`, `t`.`DFechaRegistro`, `t`.`NEstadoUsuarioFK`, `t`.`NEstadoVerificacionFK`, `t`.`NRolFK`
FROM `TUsuario` AS `t`
WHERE `t`.`nUsuarioID` = @__p_0
LIMIT 1
2025-09-22 11:17:45.367 -05:00 [INF] Email del usuario con ID 2 recuperado correctamente.
2025-09-22 11:17:45.921 -05:00 [INF] Executed DbCommand (210ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 25), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `TCodigoVerificacion` (`CCodigo`, `DFechaCreacion`, `DFechaExpiracion`, `ETipoCodigo`, `NIntentos`, `NUsuarioFK`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT `NCodigoVerificacionID`, `BUsado`
FROM `TCodigoVerificacion`
WHERE ROW_COUNT() = 1 AND `NCodigoVerificacionID` = LAST_INSERT_ID();
2025-09-22 11:17:46.032 -05:00 [INF] Código de Verificación creado correctamente con ID 1.
2025-09-22 11:17:48.239 -05:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-09-22 11:17:48.241 -05:00 [INF] Executed action Api_Mediconnet.Api.Controllers.EmailCodeController.PostEmailCode (Api_Mediconnet.Api) in 3434.7149ms
2025-09-22 11:17:48.243 -05:00 [INF] Executed endpoint 'Api_Mediconnet.Api.Controllers.EmailCodeController.PostEmailCode (Api_Mediconnet.Api)'
2025-09-22 11:17:48.244 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Api/EmailCode - 200 0 null 3457.2214ms
2025-09-22 11:18:31.754 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Api/EmailCode/Verificar - null null
2025-09-22 11:18:31.757 -05:00 [INF] CORS policy execution successful.
2025-09-22 11:18:31.758 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Api/EmailCode/Verificar - 204 null null 4.4088ms
2025-09-22 11:18:31.762 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Api/EmailCode/Verificar - application/json 17
2025-09-22 11:18:31.764 -05:00 [INF] CORS policy execution successful.
2025-09-22 11:18:31.767 -05:00 [INF] Executing endpoint 'Api_Mediconnet.Api.Controllers.EmailCodeController.PostVerificarEmailCode (Api_Mediconnet.Api)'
2025-09-22 11:18:31.768 -05:00 [INF] Route matched with {action = "PostVerificarEmailCode", controller = "EmailCode"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] PostVerificarEmailCode(Api_Mediconnet.Application.DTOs.VerificarCodigoRequestDTO) on controller Api_Mediconnet.Api.Controllers.EmailCodeController (Api_Mediconnet.Api).
2025-09-22 11:18:32.218 -05:00 [INF] Executed DbCommand (101ms) [Parameters=[@__usuarioId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`NCodigoVerificacionID`, `t`.`BUsado`, `t`.`CCodigo`, `t`.`DFechaCreacion`, `t`.`DFechaExpiracion`, `t`.`ETipoCodigo`, `t`.`NIntentos`, `t`.`NUsuarioFK`
FROM `TCodigoVerificacion` AS `t`
WHERE ((`t`.`NUsuarioFK` = @__usuarioId_0) AND (`t`.`ETipoCodigo` = 'Email')) AND NOT (`t`.`BUsado`)
ORDER BY `t`.`DFechaCreacion` DESC
LIMIT 1
2025-09-22 11:18:32.225 -05:00 [WRN] El código de verificación con ID 2 es incorrecto.
2025-09-22 11:18:32.562 -05:00 [INF] Executed DbCommand (223ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (Size = 25), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `TCodigoVerificacion` SET `BUsado` = @p0, `CCodigo` = @p1, `DFechaCreacion` = @p2, `DFechaExpiracion` = @p3, `ETipoCodigo` = @p4, `NIntentos` = @p5, `NUsuarioFK` = @p6
WHERE `NCodigoVerificacionID` = @p7;
SELECT ROW_COUNT();
2025-09-22 11:18:32.567 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-22 11:18:32.568 -05:00 [INF] Executed action Api_Mediconnet.Api.Controllers.EmailCodeController.PostVerificarEmailCode (Api_Mediconnet.Api) in 798.2587ms
2025-09-22 11:18:32.571 -05:00 [INF] Executed endpoint 'Api_Mediconnet.Api.Controllers.EmailCodeController.PostVerificarEmailCode (Api_Mediconnet.Api)'
2025-09-22 11:18:32.572 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Api/EmailCode/Verificar - 400 null application/json; charset=utf-8 810.6951ms
2025-09-22 11:18:37.925 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Api/EmailCode/Verificar - null null
2025-09-22 11:18:37.927 -05:00 [INF] CORS policy execution successful.
2025-09-22 11:18:37.928 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Api/EmailCode/Verificar - 204 null null 3.357ms
2025-09-22 11:18:37.931 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Api/EmailCode/Verificar - application/json 20
2025-09-22 11:18:37.934 -05:00 [INF] CORS policy execution successful.
2025-09-22 11:18:37.935 -05:00 [INF] Executing endpoint 'Api_Mediconnet.Api.Controllers.EmailCodeController.PostVerificarEmailCode (Api_Mediconnet.Api)'
2025-09-22 11:18:37.937 -05:00 [INF] Route matched with {action = "PostVerificarEmailCode", controller = "EmailCode"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] PostVerificarEmailCode(Api_Mediconnet.Application.DTOs.VerificarCodigoRequestDTO) on controller Api_Mediconnet.Api.Controllers.EmailCodeController (Api_Mediconnet.Api).
2025-09-22 11:18:38.364 -05:00 [INF] Executed DbCommand (100ms) [Parameters=[@__usuarioId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`NCodigoVerificacionID`, `t`.`BUsado`, `t`.`CCodigo`, `t`.`DFechaCreacion`, `t`.`DFechaExpiracion`, `t`.`ETipoCodigo`, `t`.`NIntentos`, `t`.`NUsuarioFK`
FROM `TCodigoVerificacion` AS `t`
WHERE ((`t`.`NUsuarioFK` = @__usuarioId_0) AND (`t`.`ETipoCodigo` = 'Email')) AND NOT (`t`.`BUsado`)
ORDER BY `t`.`DFechaCreacion` DESC
LIMIT 1
2025-09-22 11:18:38.366 -05:00 [WRN] El código de verificación con ID 2 es incorrecto.
2025-09-22 11:18:38.682 -05:00 [INF] Executed DbCommand (215ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (Size = 25), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `TCodigoVerificacion` SET `BUsado` = @p0, `CCodigo` = @p1, `DFechaCreacion` = @p2, `DFechaExpiracion` = @p3, `ETipoCodigo` = @p4, `NIntentos` = @p5, `NUsuarioFK` = @p6
WHERE `NCodigoVerificacionID` = @p7;
SELECT ROW_COUNT();
2025-09-22 11:18:38.685 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-22 11:18:38.687 -05:00 [INF] Executed action Api_Mediconnet.Api.Controllers.EmailCodeController.PostVerificarEmailCode (Api_Mediconnet.Api) in 747.4209ms
2025-09-22 11:18:38.688 -05:00 [INF] Executed endpoint 'Api_Mediconnet.Api.Controllers.EmailCodeController.PostVerificarEmailCode (Api_Mediconnet.Api)'
2025-09-22 11:18:38.689 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Api/EmailCode/Verificar - 400 null application/json; charset=utf-8 758.3298ms
2025-09-22 11:18:43.475 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Api/EmailCode/Verificar - null null
2025-09-22 11:18:43.477 -05:00 [INF] CORS policy execution successful.
2025-09-22 11:18:43.479 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Api/EmailCode/Verificar - 204 null null 3.5649ms
2025-09-22 11:18:43.481 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Api/EmailCode/Verificar - application/json 22
2025-09-22 11:18:43.484 -05:00 [INF] CORS policy execution successful.
2025-09-22 11:18:43.486 -05:00 [INF] Executing endpoint 'Api_Mediconnet.Api.Controllers.EmailCodeController.PostVerificarEmailCode (Api_Mediconnet.Api)'
2025-09-22 11:18:43.488 -05:00 [INF] Route matched with {action = "PostVerificarEmailCode", controller = "EmailCode"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] PostVerificarEmailCode(Api_Mediconnet.Application.DTOs.VerificarCodigoRequestDTO) on controller Api_Mediconnet.Api.Controllers.EmailCodeController (Api_Mediconnet.Api).
2025-09-22 11:18:43.916 -05:00 [INF] Executed DbCommand (100ms) [Parameters=[@__usuarioId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`NCodigoVerificacionID`, `t`.`BUsado`, `t`.`CCodigo`, `t`.`DFechaCreacion`, `t`.`DFechaExpiracion`, `t`.`ETipoCodigo`, `t`.`NIntentos`, `t`.`NUsuarioFK`
FROM `TCodigoVerificacion` AS `t`
WHERE ((`t`.`NUsuarioFK` = @__usuarioId_0) AND (`t`.`ETipoCodigo` = 'Email')) AND NOT (`t`.`BUsado`)
ORDER BY `t`.`DFechaCreacion` DESC
LIMIT 1
2025-09-22 11:18:43.919 -05:00 [WRN] El código de verificación con ID 2 es incorrecto.
2025-09-22 11:18:44.244 -05:00 [INF] Executed DbCommand (217ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (Size = 25), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `TCodigoVerificacion` SET `BUsado` = @p0, `CCodigo` = @p1, `DFechaCreacion` = @p2, `DFechaExpiracion` = @p3, `ETipoCodigo` = @p4, `NIntentos` = @p5, `NUsuarioFK` = @p6
WHERE `NCodigoVerificacionID` = @p7;
SELECT ROW_COUNT();
2025-09-22 11:18:44.246 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-22 11:18:44.247 -05:00 [INF] Executed action Api_Mediconnet.Api.Controllers.EmailCodeController.PostVerificarEmailCode (Api_Mediconnet.Api) in 756.5917ms
2025-09-22 11:18:44.248 -05:00 [INF] Executed endpoint 'Api_Mediconnet.Api.Controllers.EmailCodeController.PostVerificarEmailCode (Api_Mediconnet.Api)'
2025-09-22 11:18:44.250 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Api/EmailCode/Verificar - 400 null application/json; charset=utf-8 768.953ms
2025-09-22 11:18:46.737 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Api/EmailCode/Verificar - application/json 20
2025-09-22 11:18:46.740 -05:00 [INF] CORS policy execution successful.
2025-09-22 11:18:46.741 -05:00 [INF] Executing endpoint 'Api_Mediconnet.Api.Controllers.EmailCodeController.PostVerificarEmailCode (Api_Mediconnet.Api)'
2025-09-22 11:18:46.742 -05:00 [INF] Route matched with {action = "PostVerificarEmailCode", controller = "EmailCode"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] PostVerificarEmailCode(Api_Mediconnet.Application.DTOs.VerificarCodigoRequestDTO) on controller Api_Mediconnet.Api.Controllers.EmailCodeController (Api_Mediconnet.Api).
2025-09-22 11:18:47.058 -05:00 [INF] Executed DbCommand (105ms) [Parameters=[@__usuarioId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`NCodigoVerificacionID`, `t`.`BUsado`, `t`.`CCodigo`, `t`.`DFechaCreacion`, `t`.`DFechaExpiracion`, `t`.`ETipoCodigo`, `t`.`NIntentos`, `t`.`NUsuarioFK`
FROM `TCodigoVerificacion` AS `t`
WHERE ((`t`.`NUsuarioFK` = @__usuarioId_0) AND (`t`.`ETipoCodigo` = 'Email')) AND NOT (`t`.`BUsado`)
ORDER BY `t`.`DFechaCreacion` DESC
LIMIT 1
2025-09-22 11:18:47.061 -05:00 [WRN] El código de verificación con ID 2 es incorrecto.
2025-09-22 11:18:47.374 -05:00 [INF] Executed DbCommand (211ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (Size = 25), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `TCodigoVerificacion` SET `BUsado` = @p0, `CCodigo` = @p1, `DFechaCreacion` = @p2, `DFechaExpiracion` = @p3, `ETipoCodigo` = @p4, `NIntentos` = @p5, `NUsuarioFK` = @p6
WHERE `NCodigoVerificacionID` = @p7;
SELECT ROW_COUNT();
2025-09-22 11:18:47.380 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-22 11:18:47.384 -05:00 [INF] Executed action Api_Mediconnet.Api.Controllers.EmailCodeController.PostVerificarEmailCode (Api_Mediconnet.Api) in 639.9419ms
2025-09-22 11:18:47.387 -05:00 [INF] Executed endpoint 'Api_Mediconnet.Api.Controllers.EmailCodeController.PostVerificarEmailCode (Api_Mediconnet.Api)'
2025-09-22 11:18:47.389 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Api/EmailCode/Verificar - 400 null application/json; charset=utf-8 651.0985ms
2025-09-22 11:19:07.765 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Api/EmailCode/Verificar - null null
2025-09-22 11:19:07.767 -05:00 [INF] CORS policy execution successful.
2025-09-22 11:19:07.768 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Api/EmailCode/Verificar - 204 null null 3.4549ms
2025-09-22 11:19:07.771 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Api/EmailCode/Verificar - application/json 19
2025-09-22 11:19:07.774 -05:00 [INF] CORS policy execution successful.
2025-09-22 11:19:07.775 -05:00 [INF] Executing endpoint 'Api_Mediconnet.Api.Controllers.EmailCodeController.PostVerificarEmailCode (Api_Mediconnet.Api)'
2025-09-22 11:19:07.777 -05:00 [INF] Route matched with {action = "PostVerificarEmailCode", controller = "EmailCode"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] PostVerificarEmailCode(Api_Mediconnet.Application.DTOs.VerificarCodigoRequestDTO) on controller Api_Mediconnet.Api.Controllers.EmailCodeController (Api_Mediconnet.Api).
2025-09-22 11:19:08.202 -05:00 [INF] Executed DbCommand (100ms) [Parameters=[@__usuarioId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`NCodigoVerificacionID`, `t`.`BUsado`, `t`.`CCodigo`, `t`.`DFechaCreacion`, `t`.`DFechaExpiracion`, `t`.`ETipoCodigo`, `t`.`NIntentos`, `t`.`NUsuarioFK`
FROM `TCodigoVerificacion` AS `t`
WHERE ((`t`.`NUsuarioFK` = @__usuarioId_0) AND (`t`.`ETipoCodigo` = 'Email')) AND NOT (`t`.`BUsado`)
ORDER BY `t`.`DFechaCreacion` DESC
LIMIT 1
2025-09-22 11:19:08.204 -05:00 [WRN] El código de verificación con ID 2 es correcto. Intento 4.
2025-09-22 11:19:08.526 -05:00 [INF] Executed DbCommand (220ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (Size = 25), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `TCodigoVerificacion` SET `BUsado` = @p0, `CCodigo` = @p1, `DFechaCreacion` = @p2, `DFechaExpiracion` = @p3, `ETipoCodigo` = @p4, `NIntentos` = @p5, `NUsuarioFK` = @p6
WHERE `NCodigoVerificacionID` = @p7;
SELECT ROW_COUNT();
2025-09-22 11:19:08.736 -05:00 [INF] Executed DbCommand (105ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`nUsuarioID`, `t`.`CApellido`, `t`.`CEmail`, `t`.`CNombre`, `t`.`CPassword`, `t`.`DFechaRegistro`, `t`.`NEstadoUsuarioFK`, `t`.`NEstadoVerificacionFK`, `t`.`NRolFK`
FROM `TUsuario` AS `t`
WHERE `t`.`nUsuarioID` = @__p_0
LIMIT 1
2025-09-22 11:19:09.185 -05:00 [INF] Executed DbCommand (219ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (Size = 50), @p3='?' (Size = 255), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `TUsuario` SET `CApellido` = @p0, `CEmail` = @p1, `CNombre` = @p2, `CPassword` = @p3, `DFechaRegistro` = @p4, `NEstadoUsuarioFK` = @p5, `NEstadoVerificacionFK` = @p6, `NRolFK` = @p7
WHERE `nUsuarioID` = @p8;
SELECT ROW_COUNT();
2025-09-22 11:19:09.189 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-22 11:19:09.191 -05:00 [INF] Executed action Api_Mediconnet.Api.Controllers.EmailCodeController.PostVerificarEmailCode (Api_Mediconnet.Api) in 1411.8259ms
2025-09-22 11:19:09.193 -05:00 [INF] Executed endpoint 'Api_Mediconnet.Api.Controllers.EmailCodeController.PostVerificarEmailCode (Api_Mediconnet.Api)'
2025-09-22 11:19:09.196 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Api/EmailCode/Verificar - 200 null application/json; charset=utf-8 1424.2185ms
2025-09-22 14:16:40.690 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Api/Usuario - null null
2025-09-22 14:16:40.693 -05:00 [INF] CORS policy execution successful.
2025-09-22 14:16:40.694 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Api/Usuario - 204 null null 4.6444ms
2025-09-22 14:16:40.698 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Api/Usuario - application/json 114
2025-09-22 14:16:40.701 -05:00 [INF] CORS policy execution successful.
2025-09-22 14:16:40.703 -05:00 [INF] Executing endpoint 'Api_Mediconnet.Api.Controllers.UsuarioController.PostUsuario (Api_Mediconnet.Api)'
2025-09-22 14:16:40.704 -05:00 [INF] Route matched with {action = "PostUsuario", controller = "Usuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostUsuario(Api_Mediconnet.Application.DTOs.TUsuarioCreateDTO) on controller Api_Mediconnet.Api.Controllers.UsuarioController (Api_Mediconnet.Api).
2025-09-22 14:16:42.803 -05:00 [INF] Executed DbCommand (223ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (Size = 50), @p3='?' (Size = 255), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `TUsuario` (`CApellido`, `CEmail`, `CNombre`, `CPassword`, `DFechaRegistro`, `NEstadoUsuarioFK`, `NEstadoVerificacionFK`, `NRolFK`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `nUsuarioID`
FROM `TUsuario`
WHERE ROW_COUNT() = 1 AND `nUsuarioID` = LAST_INSERT_ID();
2025-09-22 14:16:42.908 -05:00 [INF] Usuario con ID 3 creado exitosamente.
2025-09-22 14:16:43.107 -05:00 [INF] Executed DbCommand (100ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t0`.`CNombre`
FROM `TUsuario` AS `t`
INNER JOIN `TRol` AS `t0` ON `t`.`NRolFK` = `t0`.`NRolID`
WHERE `t`.`nUsuarioID` = @__id_0
LIMIT 1
2025-09-22 14:16:43.112 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-22 14:16:43.114 -05:00 [INF] Executed action Api_Mediconnet.Api.Controllers.UsuarioController.PostUsuario (Api_Mediconnet.Api) in 2406.9568ms
2025-09-22 14:16:43.115 -05:00 [INF] Executed endpoint 'Api_Mediconnet.Api.Controllers.UsuarioController.PostUsuario (Api_Mediconnet.Api)'
2025-09-22 14:16:43.117 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Api/Usuario - 200 null application/json; charset=utf-8 2418.7786ms
2025-09-22 14:16:43.121 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Api/EmailCode - null null
2025-09-22 14:16:43.125 -05:00 [INF] CORS policy execution successful.
2025-09-22 14:16:43.127 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Api/EmailCode - 204 null null 5.8809ms
2025-09-22 14:16:43.131 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Api/EmailCode - application/json 2
2025-09-22 14:16:43.134 -05:00 [INF] CORS policy execution successful.
2025-09-22 14:16:43.136 -05:00 [INF] Executing endpoint 'Api_Mediconnet.Api.Controllers.EmailCodeController.PostEmailCode (Api_Mediconnet.Api)'
2025-09-22 14:16:43.138 -05:00 [INF] Route matched with {action = "PostEmailCode", controller = "EmailCode"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] PostEmailCode() on controller Api_Mediconnet.Api.Controllers.EmailCodeController (Api_Mediconnet.Api).
2025-09-22 14:16:43.552 -05:00 [INF] Executed DbCommand (98ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`nUsuarioID`, `t`.`CApellido`, `t`.`CEmail`, `t`.`CNombre`, `t`.`CPassword`, `t`.`DFechaRegistro`, `t`.`NEstadoUsuarioFK`, `t`.`NEstadoVerificacionFK`, `t`.`NRolFK`
FROM `TUsuario` AS `t`
WHERE `t`.`nUsuarioID` = @__p_0
LIMIT 1
2025-09-22 14:16:43.556 -05:00 [INF] Email del usuario con ID 3 recuperado correctamente.
2025-09-22 14:16:44.069 -05:00 [INF] Executed DbCommand (213ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 25), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `TCodigoVerificacion` (`CCodigo`, `DFechaCreacion`, `DFechaExpiracion`, `ETipoCodigo`, `NIntentos`, `NUsuarioFK`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT `NCodigoVerificacionID`, `BUsado`
FROM `TCodigoVerificacion`
WHERE ROW_COUNT() = 1 AND `NCodigoVerificacionID` = LAST_INSERT_ID();
2025-09-22 14:16:44.175 -05:00 [INF] Código de Verificación creado correctamente con ID 2.
2025-09-22 14:16:46.283 -05:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-09-22 14:16:46.285 -05:00 [INF] Executed action Api_Mediconnet.Api.Controllers.EmailCodeController.PostEmailCode (Api_Mediconnet.Api) in 3141.4662ms
2025-09-22 14:16:46.286 -05:00 [INF] Executed endpoint 'Api_Mediconnet.Api.Controllers.EmailCodeController.PostEmailCode (Api_Mediconnet.Api)'
2025-09-22 14:16:46.288 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Api/EmailCode - 200 0 null 3157.2302ms
2025-09-22 14:17:17.808 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Api/EmailCode/Verificar - null null
2025-09-22 14:17:17.812 -05:00 [INF] CORS policy execution successful.
2025-09-22 14:17:17.813 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Api/EmailCode/Verificar - 204 null null 4.5032ms
2025-09-22 14:17:17.817 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Api/EmailCode/Verificar - application/json 19
2025-09-22 14:17:17.820 -05:00 [INF] CORS policy execution successful.
2025-09-22 14:17:17.821 -05:00 [INF] Executing endpoint 'Api_Mediconnet.Api.Controllers.EmailCodeController.PostVerificarEmailCode (Api_Mediconnet.Api)'
2025-09-22 14:17:17.822 -05:00 [INF] Route matched with {action = "PostVerificarEmailCode", controller = "EmailCode"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] PostVerificarEmailCode(Api_Mediconnet.Application.DTOs.VerificarCodigoRequestDTO) on controller Api_Mediconnet.Api.Controllers.EmailCodeController (Api_Mediconnet.Api).
2025-09-22 14:17:18.112 -05:00 [INF] Executed DbCommand (97ms) [Parameters=[@__usuarioId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`NCodigoVerificacionID`, `t`.`BUsado`, `t`.`CCodigo`, `t`.`DFechaCreacion`, `t`.`DFechaExpiracion`, `t`.`ETipoCodigo`, `t`.`NIntentos`, `t`.`NUsuarioFK`
FROM `TCodigoVerificacion` AS `t`
WHERE ((`t`.`NUsuarioFK` = @__usuarioId_0) AND (`t`.`ETipoCodigo` = 'Email')) AND NOT (`t`.`BUsado`)
ORDER BY `t`.`DFechaCreacion` DESC
LIMIT 1
2025-09-22 14:17:18.115 -05:00 [WRN] El código de verificación con ID 3 es correcto. Intento 0.
2025-09-22 14:17:18.528 -05:00 [INF] Executed DbCommand (205ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (Size = 255), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (Size = 25), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `TCodigoVerificacion` SET `BUsado` = @p0, `CCodigo` = @p1, `DFechaCreacion` = @p2, `DFechaExpiracion` = @p3, `ETipoCodigo` = @p4, `NIntentos` = @p5, `NUsuarioFK` = @p6
WHERE `NCodigoVerificacionID` = @p7;
SELECT ROW_COUNT();
2025-09-22 14:17:18.730 -05:00 [INF] Executed DbCommand (100ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`nUsuarioID`, `t`.`CApellido`, `t`.`CEmail`, `t`.`CNombre`, `t`.`CPassword`, `t`.`DFechaRegistro`, `t`.`NEstadoUsuarioFK`, `t`.`NEstadoVerificacionFK`, `t`.`NRolFK`
FROM `TUsuario` AS `t`
WHERE `t`.`nUsuarioID` = @__p_0
LIMIT 1
2025-09-22 14:17:19.164 -05:00 [INF] Executed DbCommand (216ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (Size = 255), @p2='?' (Size = 50), @p3='?' (Size = 255), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `TUsuario` SET `CApellido` = @p0, `CEmail` = @p1, `CNombre` = @p2, `CPassword` = @p3, `DFechaRegistro` = @p4, `NEstadoUsuarioFK` = @p5, `NEstadoVerificacionFK` = @p6, `NRolFK` = @p7
WHERE `nUsuarioID` = @p8;
SELECT ROW_COUNT();
2025-09-22 14:17:19.168 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-22 14:17:19.169 -05:00 [INF] Executed action Api_Mediconnet.Api.Controllers.EmailCodeController.PostVerificarEmailCode (Api_Mediconnet.Api) in 1345.701ms
2025-09-22 14:17:19.171 -05:00 [INF] Executed endpoint 'Api_Mediconnet.Api.Controllers.EmailCodeController.PostVerificarEmailCode (Api_Mediconnet.Api)'
2025-09-22 14:17:19.173 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Api/EmailCode/Verificar - 200 null application/json; charset=utf-8 1356.0911ms
2025-09-22 14:51:01.298 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Api/Login - null null
2025-09-22 14:51:01.302 -05:00 [INF] CORS policy execution successful.
2025-09-22 14:51:01.304 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Api/Login - 204 null null 5.6683ms
2025-09-22 14:51:01.307 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Api/Login - application/json 58
2025-09-22 14:51:01.312 -05:00 [INF] CORS policy execution successful.
2025-09-22 14:51:01.313 -05:00 [INF] Executing endpoint 'Api_Mediconnet.Api.Controllers.LoginsController.PostLoginsAsync (Api_Mediconnet.Api)'
2025-09-22 14:51:01.319 -05:00 [INF] Route matched with {action = "PostLogins", controller = "Logins"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginsAsync(Api_Mediconnet.Application.DTOs.LoginsRequestDTO) on controller Api_Mediconnet.Api.Controllers.LoginsController (Api_Mediconnet.Api).
2025-09-22 14:51:03.384 -05:00 [INF] Executed DbCommand (115ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`nUsuarioID`, `t`.`CApellido`, `t`.`CEmail`, `t`.`CNombre`, `t`.`CPassword`, `t`.`DFechaRegistro`, `t`.`NEstadoUsuarioFK`, `t`.`NEstadoVerificacionFK`, `t`.`NRolFK`, `t0`.`NRolID`, `t0`.`CNombre`
FROM `TUsuario` AS `t`
INNER JOIN `TRol` AS `t0` ON `t`.`NRolFK` = `t0`.`NRolID`
WHERE `t`.`CEmail` = @__email_0
LIMIT 1
2025-09-22 14:51:03.491 -05:00 [ERR] Contraseña incorrecta para el usuario con Email ronaldstevenrios@gmail.com.
2025-09-22 14:51:03.496 -05:00 [INF] Executed action Api_Mediconnet.Api.Controllers.LoginsController.PostLoginsAsync (Api_Mediconnet.Api) in 2174.9471ms
2025-09-22 14:51:03.498 -05:00 [INF] Executed endpoint 'Api_Mediconnet.Api.Controllers.LoginsController.PostLoginsAsync (Api_Mediconnet.Api)'
2025-09-22 14:51:03.500 -05:00 [ERR] Se produjo un error no controlado.
System.Exception: Contraseña incorrecta
   at Api_Mediconnet.Application.Services.TLoginsService.CrearAsync(LoginsRequestDTO loginsRequest) in C:\Users\ronal\Desktop\Archivos\Api_Mediconnet_Onion\Application\Services\TLoginsService.cs:line 69
   at Api_Mediconnet.Api.Controllers.LoginsController.PostLoginsAsync(LoginsRequestDTO LoginsRequest) in C:\Users\ronal\Desktop\Archivos\Api_Mediconnet_Onion\api\Controllers\LoginsController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Api_Mediconnet.Api.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext httpContent) in C:\Users\ronal\Desktop\Archivos\Api_Mediconnet_Onion\api\Middleware\ErrorHandlingMiddleware.cs:line 21
2025-09-22 14:51:03.552 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Api/Login - 500 null application/json 2244.5635ms
2025-09-22 14:55:39.556 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Api/Login - null null
2025-09-22 14:55:39.558 -05:00 [INF] CORS policy execution successful.
2025-09-22 14:55:39.559 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Api/Login - 204 null null 3.2141ms
2025-09-22 14:55:39.563 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Api/Login - application/json 61
2025-09-22 14:55:39.566 -05:00 [INF] CORS policy execution successful.
2025-09-22 14:55:39.567 -05:00 [INF] Executing endpoint 'Api_Mediconnet.Api.Controllers.LoginsController.PostLoginsAsync (Api_Mediconnet.Api)'
2025-09-22 14:55:39.569 -05:00 [INF] Route matched with {action = "PostLogins", controller = "Logins"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginsAsync(Api_Mediconnet.Application.DTOs.LoginsRequestDTO) on controller Api_Mediconnet.Api.Controllers.LoginsController (Api_Mediconnet.Api).
2025-09-22 14:55:41.501 -05:00 [INF] Executed DbCommand (111ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`nUsuarioID`, `t`.`CApellido`, `t`.`CEmail`, `t`.`CNombre`, `t`.`CPassword`, `t`.`DFechaRegistro`, `t`.`NEstadoUsuarioFK`, `t`.`NEstadoVerificacionFK`, `t`.`NRolFK`, `t0`.`NRolID`, `t0`.`CNombre`
FROM `TUsuario` AS `t`
INNER JOIN `TRol` AS `t0` ON `t`.`NRolFK` = `t0`.`NRolID`
WHERE `t`.`CEmail` = @__email_0
LIMIT 1
2025-09-22 14:55:42.292 -05:00 [INF] Executed DbCommand (312ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `TLogins` (`DFechaLogin`, `NUsuarioFK`)
VALUES (@p0, @p1);
SELECT `NLoginID`
FROM `TLogins`
WHERE ROW_COUNT() = 1 AND `NLoginID` = LAST_INSERT_ID();
2025-09-22 14:55:42.411 -05:00 [INF] Login con ID 1 creado exitosamente.
2025-09-22 14:55:42.413 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-22 14:55:42.415 -05:00 [INF] Executed action Api_Mediconnet.Api.Controllers.LoginsController.PostLoginsAsync (Api_Mediconnet.Api) in 2844.8246ms
2025-09-22 14:55:42.417 -05:00 [INF] Executed endpoint 'Api_Mediconnet.Api.Controllers.LoginsController.PostLoginsAsync (Api_Mediconnet.Api)'
2025-09-22 14:55:42.418 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Api/Login - 200 null application/json; charset=utf-8 2855.3988ms
2025-09-22 15:33:37.622 -05:00 [INF] Executed DbCommand (115ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM information_schema.tables
WHERE table_type = 'BASE TABLE' AND table_schema = 'Api_Mediconnet_Onion'
2025-09-22 15:33:37.798 -05:00 [INF] User profile is available. Using 'C:\Users\ronal\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 15:33:37.896 -05:00 [INF] Now listening on: http://[::]:5000
2025-09-22 15:33:37.900 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 15:33:37.902 -05:00 [INF] Hosting environment: Production
2025-09-22 15:33:37.904 -05:00 [INF] Content root path: C:\Users\ronal\Desktop\Archivos\Api_Mediconnet_Onion\api
2025-09-22 15:37:08.451 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Api/Login - application/json 68
2025-09-22 15:37:08.514 -05:00 [WRN] Failed to determine the https port for redirect.
2025-09-22 15:37:08.630 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/08/2025 8:25:26 p. m.', Current time (UTC): '22/09/2025 8:37:08 p. m.'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-22 15:37:08.656 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/08/2025 8:25:26 p. m.', Current time (UTC): '22/09/2025 8:37:08 p. m.'.
2025-09-22 15:37:08.675 -05:00 [INF] Executing endpoint 'Api_Mediconnet.Api.Controllers.LoginsController.PostLoginsAsync (Api_Mediconnet.Api)'
2025-09-22 15:37:08.733 -05:00 [INF] Route matched with {action = "PostLogins", controller = "Logins"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginsAsync(Api_Mediconnet.Application.DTOs.LoginsRequestDTO) on controller Api_Mediconnet.Api.Controllers.LoginsController (Api_Mediconnet.Api).
2025-09-22 15:37:09.835 -05:00 [INF] Executed DbCommand (147ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`nUsuarioID`, `t`.`CApellido`, `t`.`CEmail`, `t`.`CNombre`, `t`.`CPassword`, `t`.`DFechaRegistro`, `t`.`NEstadoUsuarioFK`, `t`.`NEstadoVerificacionFK`, `t`.`NRolFK`, `t0`.`NRolID`, `t0`.`CNombre`
FROM `TUsuario` AS `t`
INNER JOIN `TRol` AS `t0` ON `t`.`NRolFK` = `t0`.`NRolID`
WHERE `t`.`CEmail` = @__email_0
LIMIT 1
2025-09-22 15:37:09.848 -05:00 [ERR] No se encontró un usuario con el Email ronald@gmail.com.
2025-09-22 15:37:09.866 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType1`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-22 15:37:09.921 -05:00 [INF] Executed action Api_Mediconnet.Api.Controllers.LoginsController.PostLoginsAsync (Api_Mediconnet.Api) in 1180.8898ms
2025-09-22 15:37:09.926 -05:00 [INF] Executed endpoint 'Api_Mediconnet.Api.Controllers.LoginsController.PostLoginsAsync (Api_Mediconnet.Api)'
2025-09-22 15:37:09.938 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Api/Login - 404 null application/json; charset=utf-8 1490.2844ms
2025-09-22 15:37:27.305 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Api/Login - application/json 78
2025-09-22 15:37:27.325 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/08/2025 8:25:26 p. m.', Current time (UTC): '22/09/2025 8:37:27 p. m.'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-22 15:37:27.339 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25/08/2025 8:25:26 p. m.', Current time (UTC): '22/09/2025 8:37:27 p. m.'.
2025-09-22 15:37:27.342 -05:00 [INF] Executing endpoint 'Api_Mediconnet.Api.Controllers.LoginsController.PostLoginsAsync (Api_Mediconnet.Api)'
2025-09-22 15:37:27.345 -05:00 [INF] Route matched with {action = "PostLogins", controller = "Logins"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginsAsync(Api_Mediconnet.Application.DTOs.LoginsRequestDTO) on controller Api_Mediconnet.Api.Controllers.LoginsController (Api_Mediconnet.Api).
2025-09-22 15:37:28.309 -05:00 [INF] Executed DbCommand (110ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`nUsuarioID`, `t`.`CApellido`, `t`.`CEmail`, `t`.`CNombre`, `t`.`CPassword`, `t`.`DFechaRegistro`, `t`.`NEstadoUsuarioFK`, `t`.`NEstadoVerificacionFK`, `t`.`NRolFK`, `t0`.`NRolID`, `t0`.`CNombre`
FROM `TUsuario` AS `t`
INNER JOIN `TRol` AS `t0` ON `t`.`NRolFK` = `t0`.`NRolID`
WHERE `t`.`CEmail` = @__email_0
LIMIT 1
2025-09-22 15:37:29.263 -05:00 [INF] Executed DbCommand (231ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `TLogins` (`DFechaLogin`, `NUsuarioFK`)
VALUES (@p0, @p1);
SELECT `NLoginID`
FROM `TLogins`
WHERE ROW_COUNT() = 1 AND `NLoginID` = LAST_INSERT_ID();
2025-09-22 15:37:29.426 -05:00 [INF] Login con ID 2 creado exitosamente.
2025-09-22 15:37:29.429 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType1`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-22 15:37:29.432 -05:00 [INF] Executed action Api_Mediconnet.Api.Controllers.LoginsController.PostLoginsAsync (Api_Mediconnet.Api) in 2082.8231ms
2025-09-22 15:37:29.434 -05:00 [INF] Executed endpoint 'Api_Mediconnet.Api.Controllers.LoginsController.PostLoginsAsync (Api_Mediconnet.Api)'
2025-09-22 15:37:29.437 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Api/Login - 200 null application/json; charset=utf-8 2132.9312ms
2025-09-22 15:43:14.755 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Api/Login - null null
2025-09-22 15:43:14.760 -05:00 [INF] CORS policy execution successful.
2025-09-22 15:43:14.764 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Api/Login - 204 null null 8.436ms
2025-09-22 15:43:14.769 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Api/Login - application/json 58
2025-09-22 15:43:14.772 -05:00 [INF] CORS policy execution successful.
2025-09-22 15:43:14.777 -05:00 [INF] Executing endpoint 'Api_Mediconnet.Api.Controllers.LoginsController.PostLoginsAsync (Api_Mediconnet.Api)'
2025-09-22 15:43:14.779 -05:00 [INF] Route matched with {action = "PostLogins", controller = "Logins"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginsAsync(Api_Mediconnet.Application.DTOs.LoginsRequestDTO) on controller Api_Mediconnet.Api.Controllers.LoginsController (Api_Mediconnet.Api).
2025-09-22 15:43:16.555 -05:00 [INF] Executed DbCommand (113ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`nUsuarioID`, `t`.`CApellido`, `t`.`CEmail`, `t`.`CNombre`, `t`.`CPassword`, `t`.`DFechaRegistro`, `t`.`NEstadoUsuarioFK`, `t`.`NEstadoVerificacionFK`, `t`.`NRolFK`, `t0`.`NRolID`, `t0`.`CNombre`
FROM `TUsuario` AS `t`
INNER JOIN `TRol` AS `t0` ON `t`.`NRolFK` = `t0`.`NRolID`
WHERE `t`.`CEmail` = @__email_0
LIMIT 1
2025-09-22 15:43:16.648 -05:00 [ERR] Contraseña incorrecta para el usuario con Email ronaldstevenrios@gmail.com.
2025-09-22 15:43:16.650 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType1`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-22 15:43:16.652 -05:00 [INF] Executed action Api_Mediconnet.Api.Controllers.LoginsController.PostLoginsAsync (Api_Mediconnet.Api) in 1871.3451ms
2025-09-22 15:43:16.654 -05:00 [INF] Executed endpoint 'Api_Mediconnet.Api.Controllers.LoginsController.PostLoginsAsync (Api_Mediconnet.Api)'
2025-09-22 15:43:16.656 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Api/Login - 401 null application/json; charset=utf-8 1887.7321ms
2025-09-22 15:44:07.109 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Api/Login - null null
2025-09-22 15:44:07.112 -05:00 [INF] CORS policy execution successful.
2025-09-22 15:44:07.113 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Api/Login - 204 null null 4.4521ms
2025-09-22 15:44:07.118 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Api/Login - application/json 61
2025-09-22 15:44:07.121 -05:00 [INF] CORS policy execution successful.
2025-09-22 15:44:07.122 -05:00 [INF] Executing endpoint 'Api_Mediconnet.Api.Controllers.LoginsController.PostLoginsAsync (Api_Mediconnet.Api)'
2025-09-22 15:44:07.124 -05:00 [INF] Route matched with {action = "PostLogins", controller = "Logins"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginsAsync(Api_Mediconnet.Application.DTOs.LoginsRequestDTO) on controller Api_Mediconnet.Api.Controllers.LoginsController (Api_Mediconnet.Api).
2025-09-22 15:44:07.491 -05:00 [INF] Executed DbCommand (130ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`nUsuarioID`, `t`.`CApellido`, `t`.`CEmail`, `t`.`CNombre`, `t`.`CPassword`, `t`.`DFechaRegistro`, `t`.`NEstadoUsuarioFK`, `t`.`NEstadoVerificacionFK`, `t`.`NRolFK`, `t0`.`NRolID`, `t0`.`CNombre`
FROM `TUsuario` AS `t`
INNER JOIN `TRol` AS `t0` ON `t`.`NRolFK` = `t0`.`NRolID`
WHERE `t`.`CEmail` = @__email_0
LIMIT 1
2025-09-22 15:44:08.258 -05:00 [INF] Executed DbCommand (238ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `TLogins` (`DFechaLogin`, `NUsuarioFK`)
VALUES (@p0, @p1);
SELECT `NLoginID`
FROM `TLogins`
WHERE ROW_COUNT() = 1 AND `NLoginID` = LAST_INSERT_ID();
2025-09-22 15:44:08.374 -05:00 [INF] Login con ID 3 creado exitosamente.
2025-09-22 15:44:08.377 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType1`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-22 15:44:08.379 -05:00 [INF] Executed action Api_Mediconnet.Api.Controllers.LoginsController.PostLoginsAsync (Api_Mediconnet.Api) in 1252.1356ms
2025-09-22 15:44:08.380 -05:00 [INF] Executed endpoint 'Api_Mediconnet.Api.Controllers.LoginsController.PostLoginsAsync (Api_Mediconnet.Api)'
2025-09-22 15:44:08.382 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Api/Login - 200 null application/json; charset=utf-8 1263.7693ms
2025-09-22 15:53:31.178 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Api/Login - null null
2025-09-22 15:53:31.181 -05:00 [INF] CORS policy execution successful.
2025-09-22 15:53:31.182 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Api/Login - 204 null null 4.6443ms
2025-09-22 15:53:31.187 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Api/Login - application/json 61
2025-09-22 15:53:31.189 -05:00 [INF] CORS policy execution successful.
2025-09-22 15:53:31.191 -05:00 [INF] Executing endpoint 'Api_Mediconnet.Api.Controllers.LoginsController.PostLoginsAsync (Api_Mediconnet.Api)'
2025-09-22 15:53:31.192 -05:00 [INF] Route matched with {action = "PostLogins", controller = "Logins"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PostLoginsAsync(Api_Mediconnet.Application.DTOs.LoginsRequestDTO) on controller Api_Mediconnet.Api.Controllers.LoginsController (Api_Mediconnet.Api).
2025-09-22 15:53:32.653 -05:00 [INF] Executed DbCommand (107ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`nUsuarioID`, `t`.`CApellido`, `t`.`CEmail`, `t`.`CNombre`, `t`.`CPassword`, `t`.`DFechaRegistro`, `t`.`NEstadoUsuarioFK`, `t`.`NEstadoVerificacionFK`, `t`.`NRolFK`, `t0`.`NRolID`, `t0`.`CNombre`
FROM `TUsuario` AS `t`
INNER JOIN `TRol` AS `t0` ON `t`.`NRolFK` = `t0`.`NRolID`
WHERE `t`.`CEmail` = @__email_0
LIMIT 1
2025-09-22 15:53:33.292 -05:00 [INF] Executed DbCommand (224ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `TLogins` (`DFechaLogin`, `NUsuarioFK`)
VALUES (@p0, @p1);
SELECT `NLoginID`
FROM `TLogins`
WHERE ROW_COUNT() = 1 AND `NLoginID` = LAST_INSERT_ID();
2025-09-22 15:53:33.407 -05:00 [INF] Login con ID 4 creado exitosamente.
2025-09-22 15:53:33.409 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType1`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-22 15:53:33.410 -05:00 [INF] Executed action Api_Mediconnet.Api.Controllers.LoginsController.PostLoginsAsync (Api_Mediconnet.Api) in 2216.7332ms
2025-09-22 15:53:33.412 -05:00 [INF] Executed endpoint 'Api_Mediconnet.Api.Controllers.LoginsController.PostLoginsAsync (Api_Mediconnet.Api)'
2025-09-22 15:53:33.414 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Api/Login - 200 null application/json; charset=utf-8 2227.3619ms
